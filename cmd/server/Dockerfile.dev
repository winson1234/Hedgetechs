# Development Dockerfile for Go backend with hot-reloading
FROM golang:alpine

# Install git (required for some Go packages) and Air for hot-reloading
RUN apk add --no-cache git && \
    go install github.com/air-verse/air@latest

# Set working directory
WORKDIR /app

# Copy go mod files and download dependencies
# This layer will be cached unless go.mod or go.sum changes
COPY go.mod go.sum ./
RUN go mod download

# Source code will be mounted as a volume for hot-reloading
# No need to COPY source code here

# Expose port
EXPOSE 8080

# Run Air for hot-reloading
CMD ["air"]
