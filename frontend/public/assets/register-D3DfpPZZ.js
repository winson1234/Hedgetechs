import"./modulepreload-polyfill-B5Qt9EMX.js";const x=document.getElementById("registerForm"),r=document.getElementById("country"),P=document.getElementById("firstName"),b=document.getElementById("lastName"),n=document.getElementById("email"),o=document.getElementById("password"),s=document.getElementById("retypePassword");document.getElementById("registerBtn");const N=document.querySelector(".client-login-btn"),u=document.getElementById("togglePassword"),m=document.getElementById("toggleRetypePassword"),g=document.getElementById("emailError"),a=document.getElementById("retypeError"),f=document.getElementById("passwordStrength"),S=document.getElementById("strengthBar"),h=document.getElementById("strengthText");let l=Array.from(r.options).slice(1);const w=l.find(e=>e.value==="MY");l=l.filter(e=>e.value!=="MY");l.sort((e,t)=>e.text.localeCompare(t.text));r.innerHTML='<option value="">Select your country</option>';r.appendChild(w);l.forEach(e=>r.appendChild(e));w.selected=!0;u.addEventListener("click",()=>{o.type==="password"?(o.type="text",u.style.opacity="0.5"):(o.type="password",u.style.opacity="1")});m.addEventListener("click",()=>{s.type==="password"?(s.type="text",m.style.opacity="0.5"):(s.type="password",m.style.opacity="1")});function C(e){let t=0;return e.length>=8&&t++,e.length>=12&&t++,/[a-z]/.test(e)&&/[A-Z]/.test(e)&&t++,/\d/.test(e)&&t++,/[^a-zA-Z0-9]/.test(e)&&t++,t<=2?{strength:"Weak",class:"weak"}:t<=4?{strength:"Medium",class:"medium"}:{strength:"Strong",class:"strong"}}o.addEventListener("input",()=>{const e=o.value;if(e.length>0){f.classList.add("show");const t=C(e);S.className="strength-bar-fill "+t.class,h.className="strength-text "+t.class,h.textContent=t.strength+" password"}else f.classList.remove("show");s.value.length>0&&v()});s.addEventListener("input",v);function v(){s.value.length>0?o.value!==s.value?(a.classList.add("show"),s.style.borderColor="#e74c3c"):(a.classList.remove("show"),s.style.borderColor="#27ae60"):(a.classList.remove("show"),s.style.borderColor="#ddd")}n.addEventListener("blur",()=>{const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;n.value&&!e.test(n.value)?(g.classList.add("show"),n.style.borderColor="#e74c3c"):(g.classList.remove("show"),n.style.borderColor="#ddd")});x.addEventListener("submit",e=>{e.preventDefault();const t=r.value,y=P.value.trim(),p=b.value.trim(),E=`${y} ${p}`,c=n.value.trim().toLowerCase(),i=o.value,I=s.value;if(!t){alert("Please select your country"),r.focus();return}if(!y||!p){alert("Please enter both first and last name");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c)){g.classList.add("show"),n.focus();return}if(i.length<8){alert("Password must be at least 8 characters long"),o.focus();return}if(i!==I){a.classList.add("show"),s.focus();return}const d=JSON.parse(localStorage.getItem("users")||"[]");if(d.find(L=>L.email===c)){alert("❌ This email is already registered. Please log in instead."),n.focus();return}const B={name:E,country:t,email:c,password:i};d.push(B),localStorage.setItem("users",JSON.stringify(d)),alert("✅ Account created successfully! You can now log in."),window.location.href="/login.html"});N.addEventListener("click",()=>{window.location.href="/login.html"});
